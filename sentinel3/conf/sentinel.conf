# Redis 센티널 3 설정 (Redis 7.4)

port 26379
bind 0.0.0.0
protected-mode no

daemonize no
loglevel notice

dir "/data"

# 호스트명 해석/광고 처리 활성화
sentinel resolve-hostnames yes
sentinel announce-hostnames yes

# 도커 내부/외부에서 다르게 해석되는 호스트명으로 마스터를 모니터링
# - 도커 내부: redis-local -> redis-master 컨테이너 (Docker network alias)
# - 호스트(Windows): redis-local -> 127.0.0.1 (hosts 파일)
sentinel monitor mymaster redis-local 6379 2
sentinel auth-pass mymaster __REDIS_PASSWORD__

# 튜닝
sentinel down-after-milliseconds mymaster 10000
sentinel failover-timeout mymaster 60000
